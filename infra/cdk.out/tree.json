{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.236.0"},"children":{"PenguinHealth":{"id":"PenguinHealth","path":"PenguinHealth","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.236.0"},"children":{"Database":{"id":"Database","path":"PenguinHealth/Database","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"OrgConfigTable":{"id":"OrgConfigTable","path":"PenguinHealth/Database/OrgConfigTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/Database/OrgConfigTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"},{"attributeName":"gsi1pk","attributeType":"S"},{"attributeName":"gsi1sk","attributeType":"S"},{"attributeName":"gsi2pk","attributeType":"S"},{"attributeName":"gsi2sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"gsi1pk","keyType":"HASH"},{"attributeName":"gsi1sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"GSI2","keySchema":[{"attributeName":"gsi2pk","keyType":"HASH"},{"attributeName":"gsi2sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"tableName":"penguin-health-org-config","tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}]}}},"ScalingRole":{"id":"ScalingRole","path":"PenguinHealth/Database/OrgConfigTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"ValidationResultsTable":{"id":"ValidationResultsTable","path":"PenguinHealth/Database/ValidationResultsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/Database/ValidationResultsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"},{"attributeName":"gsi1pk","attributeType":"S"},{"attributeName":"gsi1sk","attributeType":"S"},{"attributeName":"gsi2pk","attributeType":"S"},{"attributeName":"gsi2sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"gsi1pk","keyType":"HASH"},{"attributeName":"gsi1sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"GSI2","keySchema":[{"attributeName":"gsi2pk","keyType":"HASH"},{"attributeName":"gsi2sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"tableName":"penguin-health-validation-results","tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}]}}},"ScalingRole":{"id":"ScalingRole","path":"PenguinHealth/Database/ValidationResultsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"IrpTable":{"id":"IrpTable","path":"PenguinHealth/Database/IrpTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/Database/IrpTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"},{"attributeName":"gsi1pk","attributeType":"S"},{"attributeName":"gsi1sk","attributeType":"S"},{"attributeName":"gsi2pk","attributeType":"S"},{"attributeName":"gsi2sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"gsi1pk","keyType":"HASH"},{"attributeName":"gsi1sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"GSI2","keySchema":[{"attributeName":"gsi2pk","keyType":"HASH"},{"attributeName":"gsi2sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"tableName":"penguin-health-irp","tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}]}}},"ScalingRole":{"id":"ScalingRole","path":"PenguinHealth/Database/IrpTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"NotificationsTopic":{"id":"NotificationsTopic","path":"PenguinHealth/Database/NotificationsTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/Database/NotificationsTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}],"topicName":"penguin-health-notifications-multi-org"}}}}}}},"AdminUi":{"id":"AdminUi","path":"PenguinHealth/AdminUi","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"AdminUserPool":{"id":"AdminUserPool","path":"PenguinHealth/AdminUi/AdminUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":12,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"ManagedBy":"cdk","Project":"penguin-health"},"usernameAttributes":["email"],"userPoolName":"penguin-health-admin-pool","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"AdminAppClient":{"id":"AdminAppClient","path":"PenguinHealth/AdminUi/AdminUserPool/AdminAppClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminUserPool/AdminAppClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"penguin-health-admin-app","explicitAuthFlows":["ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"idTokenValidity":60,"refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"AdminUiAdminUserPool5F003C79"}}}}}}}},"AdminsGroup":{"id":"AdminsGroup","path":"PenguinHealth/AdminUi/AdminsGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Admin users with full access to organization configuration","groupName":"Admins","userPoolId":{"Ref":"AdminUiAdminUserPool5F003C79"}}}},"AdminApiFunction":{"id":"AdminApiFunction","path":"PenguinHealth/AdminUi/AdminApiFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"PenguinHealth/AdminUi/AdminApiFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminApiFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PenguinHealth/AdminUi/AdminApiFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminApiFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:GetRecords","dynamodb:GetShardIterator"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:Query","dynamodb:Scan","dynamodb:GetItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},"/index/*"]]}}],"Version":"2012-10-17"},"policyName":"AdminUiAdminApiFunctionServiceRoleDefaultPolicyBD2D453A","roles":[{"Ref":"AdminUiAdminApiFunctionServiceRoleDA2529A1"}]}}}}}}},"Code":{"id":"Code","path":"PenguinHealth/AdminUi/AdminApiFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"PenguinHealth/AdminUi/AdminApiFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"PenguinHealth/AdminUi/AdminApiFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminApiFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"4aeaacf1557b11d4d828006e614256e0984ccbc3e5a19b85aec15a6b1b26f478.zip"},"environment":{"variables":{"DYNAMODB_TABLE":{"Ref":"DatabaseOrgConfigTable10356BB8"},"COGNITO_USER_POOL_ID":{"Ref":"AdminUiAdminUserPool5F003C79"}}},"functionName":"penguin-health-admin-api","handler":"admin_api.lambda_handler","memorySize":256,"role":{"Fn::GetAtt":["AdminUiAdminApiFunctionServiceRoleDA2529A1","Arn"]},"runtime":"python3.14","tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}],"timeout":900}}}}},"AdminHttpApi":{"id":"AdminHttpApi","path":"PenguinHealth/AdminUi/AdminHttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["Authorization","Content-Type"],"allowMethods":["GET","PUT","POST","DELETE","OPTIONS"],"allowOrigins":["*"],"maxAge":3600},"name":"penguin-health-admin-api","protocolType":"HTTP","tags":{"ManagedBy":"cdk","Project":"penguin-health"}}}},"DefaultStage":{"id":"DefaultStage","path":"PenguinHealth/AdminUi/AdminHttpApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"autoDeploy":true,"stageName":"$default","tags":{"ManagedBy":"cdk","Project":"penguin-health"}}}}}},"GET--api--organizations":{"id":"GET--api--organizations","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.236.0"},"children":{"AdminApiIntegration":{"id":"AdminApiIntegration","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations/AdminApiIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations/AdminApiIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["AdminUiAdminApiFunctionF9667708","Arn"]},"payloadFormatVersion":"2.0"}}}}},"AdminApiIntegration-Permission":{"id":"AdminApiIntegration-Permission","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations/AdminApiIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminUiAdminApiFunctionF9667708","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"AdminUiAdminHttpApi90C20B12"},"/*/*/api/organizations"]]}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"authorizationType":"JWT","authorizerId":{"Ref":"AdminUiAdminHttpApiCognitoAuthorizerCC473533"},"routeKey":"GET /api/organizations","target":{"Fn::Join":["",["integrations/",{"Ref":"AdminUiAdminHttpApiGETapiorganizationsAdminApiIntegrationD15C6010"}]]}}}}}},"CognitoAuthorizer":{"id":"CognitoAuthorizer","path":"PenguinHealth/AdminUi/AdminHttpApi/CognitoAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpAuthorizer","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/CognitoAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnAuthorizer","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Authorizer","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"authorizerType":"JWT","identitySource":["$request.header.Authorization"],"jwtConfiguration":{"audience":[{"Ref":"AdminUiAdminUserPoolAdminAppClient968AD5D0"}],"issuer":{"Fn::Join":["",["https://cognito-idp.us-east-1.amazonaws.com/",{"Ref":"AdminUiAdminUserPool5F003C79"}]]}},"name":"CognitoAuthorizer"}}}}},"GET--api--organizations--{orgId}":{"id":"GET--api--organizations--{orgId}","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.236.0"},"children":{"AdminApiIntegration-Permission":{"id":"AdminApiIntegration-Permission","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}/AdminApiIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminUiAdminApiFunctionF9667708","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"AdminUiAdminHttpApi90C20B12"},"/*/*/api/organizations/{orgId}"]]}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"authorizationType":"JWT","authorizerId":{"Ref":"AdminUiAdminHttpApiCognitoAuthorizerCC473533"},"routeKey":"GET /api/organizations/{orgId}","target":{"Fn::Join":["",["integrations/",{"Ref":"AdminUiAdminHttpApiGETapiorganizationsAdminApiIntegrationD15C6010"}]]}}}}}},"GET--api--organizations--{orgId}--rules":{"id":"GET--api--organizations--{orgId}--rules","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}--rules","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.236.0"},"children":{"AdminApiIntegration-Permission":{"id":"AdminApiIntegration-Permission","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}--rules/AdminApiIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminUiAdminApiFunctionF9667708","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"AdminUiAdminHttpApi90C20B12"},"/*/*/api/organizations/{orgId}/rules"]]}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}--rules/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"authorizationType":"JWT","authorizerId":{"Ref":"AdminUiAdminHttpApiCognitoAuthorizerCC473533"},"routeKey":"GET /api/organizations/{orgId}/rules","target":{"Fn::Join":["",["integrations/",{"Ref":"AdminUiAdminHttpApiGETapiorganizationsAdminApiIntegrationD15C6010"}]]}}}}}},"GET--api--organizations--{orgId}--rules--{ruleId}":{"id":"GET--api--organizations--{orgId}--rules--{ruleId}","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}--rules--{ruleId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.236.0"},"children":{"AdminApiIntegration-Permission":{"id":"AdminApiIntegration-Permission","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}--rules--{ruleId}/AdminApiIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminUiAdminApiFunctionF9667708","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"AdminUiAdminHttpApi90C20B12"},"/*/*/api/organizations/{orgId}/rules/{ruleId}"]]}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}--rules--{ruleId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"authorizationType":"JWT","authorizerId":{"Ref":"AdminUiAdminHttpApiCognitoAuthorizerCC473533"},"routeKey":"GET /api/organizations/{orgId}/rules/{ruleId}","target":{"Fn::Join":["",["integrations/",{"Ref":"AdminUiAdminHttpApiGETapiorganizationsAdminApiIntegrationD15C6010"}]]}}}}}},"PUT--api--organizations--{orgId}--rules--{ruleId}":{"id":"PUT--api--organizations--{orgId}--rules--{ruleId}","path":"PenguinHealth/AdminUi/AdminHttpApi/PUT--api--organizations--{orgId}--rules--{ruleId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.236.0"},"children":{"AdminApiIntegration-Permission":{"id":"AdminApiIntegration-Permission","path":"PenguinHealth/AdminUi/AdminHttpApi/PUT--api--organizations--{orgId}--rules--{ruleId}/AdminApiIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminUiAdminApiFunctionF9667708","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"AdminUiAdminHttpApi90C20B12"},"/*/*/api/organizations/{orgId}/rules/{ruleId}"]]}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/PUT--api--organizations--{orgId}--rules--{ruleId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"authorizationType":"JWT","authorizerId":{"Ref":"AdminUiAdminHttpApiCognitoAuthorizerCC473533"},"routeKey":"PUT /api/organizations/{orgId}/rules/{ruleId}","target":{"Fn::Join":["",["integrations/",{"Ref":"AdminUiAdminHttpApiGETapiorganizationsAdminApiIntegrationD15C6010"}]]}}}}}},"POST--api--organizations--{orgId}--rules":{"id":"POST--api--organizations--{orgId}--rules","path":"PenguinHealth/AdminUi/AdminHttpApi/POST--api--organizations--{orgId}--rules","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.236.0"},"children":{"AdminApiIntegration-Permission":{"id":"AdminApiIntegration-Permission","path":"PenguinHealth/AdminUi/AdminHttpApi/POST--api--organizations--{orgId}--rules/AdminApiIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminUiAdminApiFunctionF9667708","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"AdminUiAdminHttpApi90C20B12"},"/*/*/api/organizations/{orgId}/rules"]]}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/POST--api--organizations--{orgId}--rules/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"authorizationType":"JWT","authorizerId":{"Ref":"AdminUiAdminHttpApiCognitoAuthorizerCC473533"},"routeKey":"POST /api/organizations/{orgId}/rules","target":{"Fn::Join":["",["integrations/",{"Ref":"AdminUiAdminHttpApiGETapiorganizationsAdminApiIntegrationD15C6010"}]]}}}}}},"GET--api--organizations--{orgId}--rules-config":{"id":"GET--api--organizations--{orgId}--rules-config","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}--rules-config","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.236.0"},"children":{"AdminApiIntegration-Permission":{"id":"AdminApiIntegration-Permission","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}--rules-config/AdminApiIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminUiAdminApiFunctionF9667708","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"AdminUiAdminHttpApi90C20B12"},"/*/*/api/organizations/{orgId}/rules-config"]]}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/GET--api--organizations--{orgId}--rules-config/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"authorizationType":"JWT","authorizerId":{"Ref":"AdminUiAdminHttpApiCognitoAuthorizerCC473533"},"routeKey":"GET /api/organizations/{orgId}/rules-config","target":{"Fn::Join":["",["integrations/",{"Ref":"AdminUiAdminHttpApiGETapiorganizationsAdminApiIntegrationD15C6010"}]]}}}}}},"PUT--api--organizations--{orgId}--rules-config":{"id":"PUT--api--organizations--{orgId}--rules-config","path":"PenguinHealth/AdminUi/AdminHttpApi/PUT--api--organizations--{orgId}--rules-config","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.236.0"},"children":{"AdminApiIntegration-Permission":{"id":"AdminApiIntegration-Permission","path":"PenguinHealth/AdminUi/AdminHttpApi/PUT--api--organizations--{orgId}--rules-config/AdminApiIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminUiAdminApiFunctionF9667708","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"AdminUiAdminHttpApi90C20B12"},"/*/*/api/organizations/{orgId}/rules-config"]]}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminHttpApi/PUT--api--organizations--{orgId}--rules-config/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"AdminUiAdminHttpApi90C20B12"},"authorizationType":"JWT","authorizerId":{"Ref":"AdminUiAdminHttpApiCognitoAuthorizerCC473533"},"routeKey":"PUT /api/organizations/{orgId}/rules-config","target":{"Fn::Join":["",["integrations/",{"Ref":"AdminUiAdminHttpApiGETapiorganizationsAdminApiIntegrationD15C6010"}]]}}}}}}}},"FrontendBucket":{"id":"FrontendBucket","path":"PenguinHealth/AdminUi/FrontendBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/FrontendBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"penguin-health-admin-ui","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"PenguinHealth/AdminUi/FrontendBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/FrontendBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"AdminUiFrontendBucket2357732C"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"AdminUiAdminDistribution922D1776"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["AdminUiFrontendBucket2357732C","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"AdminDistribution":{"id":"AdminDistribution","path":"PenguinHealth/AdminUi/AdminDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.236.0"},"children":{"Origin1":{"id":"Origin1","path":"PenguinHealth/AdminUi/AdminDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"S3OriginAccessControl":{"id":"S3OriginAccessControl","path":"PenguinHealth/AdminUi/AdminDistribution/Origin1/S3OriginAccessControl","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminDistribution/Origin1/S3OriginAccessControl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"PenguinHealthAdminUiAdminDisOrigin1S3OriginAccessControl8FCDB488","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}}}},"Origin2":{"id":"Origin2","path":"PenguinHealth/AdminUi/AdminDistribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Resource":{"id":"Resource","path":"PenguinHealth/AdminUi/AdminDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["AdminUiFrontendBucket2357732C","RegionalDomainName"]},"id":"PenguinHealthAdminUiAdminDistributionOrigin174025967","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["AdminUiAdminDistributionOrigin1S3OriginAccessControl5D67381B","Id"]}},{"domainName":{"Fn::Join":["",[{"Ref":"AdminUiAdminHttpApi90C20B12"},".execute-api.us-east-1.amazonaws.com"]]},"id":"PenguinHealthAdminUiAdminDistributionOrigin21356DB85","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"PenguinHealthAdminUiAdminDistributionOrigin174025967","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"/api/*","targetOriginId":"PenguinHealthAdminUiAdminDistributionOrigin21356DB85","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"b689b0a8-53d0-40ab-baf2-68738e2966ac","viewerProtocolPolicy":"redirect-to-https"}],"customErrorResponses":[{"errorCachingMinTtl":0,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":0,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true},"tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}]}}}}}}},"AuditEngine":{"id":"AuditEngine","path":"PenguinHealth/AuditEngine","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"ProcessRawChartsFn":{"id":"ProcessRawChartsFn","path":"PenguinHealth/AuditEngine/ProcessRawChartsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"PenguinHealth/AuditEngine/ProcessRawChartsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/ProcessRawChartsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PenguinHealth/AuditEngine/ProcessRawChartsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/ProcessRawChartsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject","s3:ListBucket","s3:GetObjectTagging","s3:PutObjectTagging","s3:CopyObject"],"Effect":"Allow","Resource":["arn:aws:s3:::penguin-health-*","arn:aws:s3:::penguin-health-*/*"]},{"Action":"textract:StartDocumentAnalysis","Effect":"Allow","Resource":"*"},{"Action":"iam:PassRole","Effect":"Allow","Resource":"arn:aws:iam::854681582286:role/AmazonTextractSNSRole"}],"Version":"2012-10-17"},"policyName":"AuditEngineProcessRawChartsFnServiceRoleDefaultPolicy60452A0B","roles":[{"Ref":"AuditEngineProcessRawChartsFnServiceRole6EA0D2DA"}]}}}}}}},"Code":{"id":"Code","path":"PenguinHealth/AuditEngine/ProcessRawChartsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"PenguinHealth/AuditEngine/ProcessRawChartsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"PenguinHealth/AuditEngine/ProcessRawChartsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/ProcessRawChartsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"f035171feaa1d0a3665054cef00fba026a42d1aa93fe9095f9b9686f7f95ed00.zip"},"environment":{"variables":{"SNS_TOPIC_ARN":{"Ref":"DatabaseNotificationsTopicF00E869E"},"SNS_ROLE_ARN":"arn:aws:iam::854681582286:role/AmazonTextractSNSRole"}},"functionName":"penguin-health-process-raw-charts-multi-org","handler":"process_raw_charts_multi_org.lambda_handler","memorySize":256,"role":{"Fn::GetAtt":["AuditEngineProcessRawChartsFnServiceRole6EA0D2DA","Arn"]},"runtime":"python3.14","tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}],"timeout":900}}}}},"TextractResultHandlerFn":{"id":"TextractResultHandlerFn","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject","s3:ListBucket","s3:GetObjectTagging","s3:PutObjectTagging","s3:CopyObject"],"Effect":"Allow","Resource":["arn:aws:s3:::penguin-health-*","arn:aws:s3:::penguin-health-*/*"]},{"Action":"textract:GetDocumentAnalysis","Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:GetRecords","dynamodb:GetShardIterator"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AuditEngineTextractResultHandlerFnServiceRoleDefaultPolicyEA87E6FB","roles":[{"Ref":"AuditEngineTextractResultHandlerFnServiceRole3D76BCDF"}]}}}}}}},"Code":{"id":"Code","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"bc3be6df59f798b8e0e1d58fd5a2fbb2da1e96f512b31fa4463fe48f5b9f2891.zip"},"functionName":"penguin-health-textract-result-handler-multi-org","handler":"textract_result_handler_multi_org.lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["AuditEngineTextractResultHandlerFnServiceRole3D76BCDF","Arn"]},"runtime":"python3.14","tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}],"timeout":300}}},"AllowInvoke:PenguinHealthDatabaseNotificationsTopicA8CD317F":{"id":"AllowInvoke:PenguinHealthDatabaseNotificationsTopicA8CD317F","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/AllowInvoke:PenguinHealthDatabaseNotificationsTopicA8CD317F","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuditEngineTextractResultHandlerFn093C1AE9","Arn"]},"principal":"sns.amazonaws.com","sourceArn":{"Ref":"DatabaseNotificationsTopicF00E869E"}}}},"NotificationsTopic":{"id":"NotificationsTopic","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/NotificationsTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/TextractResultHandlerFn/NotificationsTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":{"Fn::GetAtt":["AuditEngineTextractResultHandlerFn093C1AE9","Arn"]},"protocol":"lambda","topicArn":{"Ref":"DatabaseNotificationsTopicF00E869E"}}}}}}}},"RulesEngineRagFn":{"id":"RulesEngineRagFn","path":"PenguinHealth/AuditEngine/RulesEngineRagFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"PenguinHealth/AuditEngine/RulesEngineRagFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/RulesEngineRagFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PenguinHealth/AuditEngine/RulesEngineRagFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/RulesEngineRagFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject","s3:ListBucket","s3:GetObjectTagging","s3:PutObjectTagging","s3:CopyObject"],"Effect":"Allow","Resource":["arn:aws:s3:::penguin-health-*","arn:aws:s3:::penguin-health-*/*"]},{"Action":["dynamodb:BatchGetItem","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:GetRecords","dynamodb:GetShardIterator"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseOrgConfigTable10356BB8","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseValidationResultsTableE1A12A7C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseValidationResultsTableE1A12A7C","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:GetRecords","dynamodb:GetShardIterator"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseValidationResultsTableE1A12A7C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseValidationResultsTableE1A12A7C","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseIrpTableD6F1FAEA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseIrpTableD6F1FAEA","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:GetRecords","dynamodb:GetShardIterator"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DatabaseIrpTableD6F1FAEA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DatabaseIrpTableD6F1FAEA","Arn"]},"/index/*"]]}]},{"Action":"bedrock:InvokeModel","Effect":"Allow","Resource":"*"},{"Action":["bedrock:RetrieveAndGenerate","bedrock:Retrieve"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"AuditEngineRulesEngineRagFnServiceRoleDefaultPolicyAEE323E7","roles":[{"Ref":"AuditEngineRulesEngineRagFnServiceRole52DB1099"}]}}}}}}},"Code":{"id":"Code","path":"PenguinHealth/AuditEngine/RulesEngineRagFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"PenguinHealth/AuditEngine/RulesEngineRagFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"PenguinHealth/AuditEngine/RulesEngineRagFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"PenguinHealth/AuditEngine/RulesEngineRagFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"24486153ffb7c70df2111f54371e8e77bcca78205f9e323033beed2fee3a7892.zip"},"functionName":"penguin-health-rules-engine-rag","handler":"rules_engine_rag.lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["AuditEngineRulesEngineRagFnServiceRole52DB1099","Arn"]},"runtime":"python3.14","tags":[{"key":"ManagedBy","value":"cdk"},{"key":"Project","value":"penguin-health"}],"timeout":300}}}}}}},"UserPoolId":{"id":"UserPoolId","path":"PenguinHealth/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"PenguinHealth/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"ApiUrl":{"id":"ApiUrl","path":"PenguinHealth/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"CloudFrontUrl":{"id":"CloudFrontUrl","path":"PenguinHealth/CloudFrontUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"FrontendBucketName":{"id":"FrontendBucketName","path":"PenguinHealth/FrontendBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"DistributionId":{"id":"DistributionId","path":"PenguinHealth/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"ProcessRawChartsFnArn":{"id":"ProcessRawChartsFnArn","path":"PenguinHealth/ProcessRawChartsFnArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"TextractHandlerFnArn":{"id":"TextractHandlerFnArn","path":"PenguinHealth/TextractHandlerFnArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"RulesEngineFnArn":{"id":"RulesEngineFnArn","path":"PenguinHealth/RulesEngineFnArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"NotificationsTopicArn":{"id":"NotificationsTopicArn","path":"PenguinHealth/NotificationsTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"PenguinHealth/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"PenguinHealth/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PenguinHealth/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.236.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PenguinHealth/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.236.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}